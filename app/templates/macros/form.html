{% macro render_login_form(form) %}
    <a class="btn btn-outline-dark w-100 mb-2" href="{{ url_for("auth.apple") }}">
        <i class="bi bi-apple"></i> Sign in with Apple</a>
    <a class="btn btn-outline-danger w-100 my-2" href="{{ url_for("auth.google") }}">
        <i class="bi bi-google"></i> Sign in with Google</a>

    <div class="separator my-3"><span class="text-muted"> Or </span></div>
    {# <hr class="my-3"> #}

    <form method="post" action="{{ url_for('auth.login') }}">
        {{ form.hidden_tag() }}
        <div class="form-floating mb-3">
            {{ form.email(class_='form-control', style='border-radius: .5rem') }}
            {{ form.email.label() }}
        </div>
        <div class="form-floating mb-3">
            {{ form.password(class_='form-control', style='border-radius: .5rem') }}
            {{ form.password.label() }}
        </div>
        <div class="form-check mb-3">
            {{ form.remember_me(class_='form-check-input') }}
            {{ form.remember_me.label(class_='form-check-label') }}
        </div>
        {{ form.submit(class_='btn btn-success w-100') }}
    </form>

    <p class="mt-3 text-center">
        <a class="text-decoration-none" href="{{ url_for('auth.password_reset_request') }}">Forgot your password?</a>
    </p>
    <p class="mt-3 text-center text-muted">Don't have an account?
        <a class="text-decoration-none" href="{{ url_for("auth.signup") }}">Sign Up</a>
    </p>
{% endmacro %}


{% macro render_signup_form(form, has_invite_code=False) %}
    <a class="btn btn-outline-dark w-100 mb-2 {% if not has_invite_code %}disabled{% endif %}"
       href="{{ url_for("auth.apple") }}"><i class="bi bi-apple"></i> Sign up with Apple</a>
    <a class="btn btn-outline-danger w-100 my-2 {% if not has_invite_code %}disabled{% endif %}"
       href="{{ url_for("auth.google") }}"><i class="bi bi-google"></i> Sign up with Google</a>

    <div class="separator my-3"><span class="text-muted"> Or </span></div>
    {# <hr class="my-3"> #}

    <form method="post" action="{{ url_for('auth.signup') }}">
        {{ form.hidden_tag() }}
        <div class="form-floating mb-3">
            {% if form.invite_code.errors %}
                {{ form.invite_code(class_='form-control is-invalid', style='border-radius: .5rem') }}
            {% else %}
                {{ form.invite_code(class_='form-control', style='border-radius: .5rem') }}
            {% endif %}
            {{ form.invite_code.label() }}
            {% for error in form.invite_code.errors %}
                <div class="invalid-feedback" style="display: block;">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-floating mb-3">
            {% if form.email.errors %}
                {{ form.email(class_='form-control is-invalid', style='border-radius: .5rem') }}
            {% else %}
                {{ form.email(class_='form-control', style='border-radius: .5rem') }}
            {% endif %}
            {{ form.email.label() }}
            {% for error in form.email.errors %}
                <div class="invalid-feedback" style="display: block;">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-floating mb-3">
            {{ form.password(class_='form-control', style='border-radius: .5rem') }}
            {{ form.password.label() }}
        </div>
        <div class="form-floating mb-3">
            {{ form.confirm_password(class_='form-control', style='border-radius: .5rem') }}
            {{ form.confirm_password.label() }}
        </div>
        {{ form.submit(class_='btn btn-success w-100 mb-3') }}
    </form>

    {% if not has_invite_code %}
        <p class="text-center text-muted">Need an invite code?
            <a class="text-decoration-none" href="https://discord.gg/PC7mPwXYsY">Join our Discord</a> or follow us on
            <a class="text-decoration-none" href="https://twitter.com/KnowbleApp">Twitter</a> /
            <a class="text-decoration-none" href="https://fb.me/KnowbleApp">Facebook</a> /
            <a class="text-decoration-none" href="https://www.linkedin.com/company/knowbleapp">LinkedIn</a>.
        </p>
    {% endif %}
{% endmacro %}


{% macro render_editor_form(form, type=None) %}
    <form method="post" {% if type == 'tui' %}onsubmit="DoSubmit(){% endif %}">
        {{ form.hidden_tag() }}
        <div class="mb-3">
            {{ form.type.label(class_='form-label') }}
            {% for item in form.type %}
                <div class="form-check">
                    {{ item(class_='form-check-input') }}
                    {{ item.label(class_='form-check-label') }}
                </div>
            {% endfor %}
        </div>
        <div class="form-floating mb-3">
            {% if form.price.errors %}
                {{ form.price(class_='form-control is-invalid', style='border-radius: .5rem') }}
            {% else %}
                {{ form.price(class_='form-control', style='border-radius: .5rem') }}
            {% endif %}
            {{ form.price.label() }}
            {% for error in form.price.errors %}
                <div class="invalid-feedback" style="display: block;">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-floating mb-3">
            {% if form.title.errors %}
                {{ form.title(class_='form-control is-invalid', style='border-radius: .5rem') }}
            {% else %}
                {{ form.title(class_='form-control', style='border-radius: .5rem') }}
            {% endif %}
            {{ form.title.label() }}
            {% for error in form.title.errors %}
                <div class="invalid-feedback" style="display: block;">{{ error }}</div>
            {% endfor %}
        </div>
        <div class="form-floating mb-3">
            {{ form.body(
                class_='form-control',
                style='display: none' if type == 'tui' else 'height: 15rem; border-radius: .5rem') }}
            {% if type is none %}{{ form.body.label() }}{% endif %}
        </div>
        <div class="mb-3" id="tui_editor"></div>
        {{ form.submit(class_='btn btn-success w-100') }}
    </form>
{% endmacro %}


{% macro render_report_form(form, post_id) %}
    <p>What is the reason for reporting this post?</p>
    <form action="{{ url_for('main.report_post', post_id=post_id) }}" method="post">
        {{ form.hidden_tag() }}
        {{ form.text(
            class_='form-control',
            rows=3,
            placeholder="Spam / Harassment / Leaking personal information / Copyright infringement / Other illegal activities") }}
        <div class="d-flex mt-3">
            {{ form.submit(class_='btn btn-success me-auto', id='btnReport') }}
            <button type="button" class="btn btn-secondary ms-auto" data-bs-dismiss="modal">
                Cancel
            </button>
        </div>
    </form>
{% endmacro %}


{% macro render_feedback_form(form) %}
    <p>We'd love to hear from you! Contact us through any of the channels below, or leave a quick message using the
        feedback form. </p>
    <div class="text-center">
        <p><a href="https://discord.gg/PC7mPwXYsY" class="text-decoration-none text-success">
            <i class="bi bi-discord"></i> Discord
        </a></p>
        <p><a href="http://192.168.0.8:8080/whatsapp" class="text-decoration-none text-success">
            <i class="bi bi-whatsapp"></i> WhatsApp
        </a></p>
        <p><a href="mailto:info@lumiask.com" class="text-decoration-none text-success">
            <i class="bi bi-envelope-fill"></i> Email
        </a></p>
        <p><a href="https://twitter.com/KnowbleApp" class="text-decoration-none text-success">
            <i class="bi bi-twitter"></i> Twitter
        </a></p>
        <p><a href="https://fb.me/KnowbleApp" class="text-decoration-none text-success">
            <i class="bi bi-facebook"></i> Facebook
        </a></p>
        <p><a href="https://www.linkedin.com/company/knowbleapp" class="text-decoration-none text-success">
            <i class="bi bi-linkedin"></i> LinkedIn
        </a></p>
    </div>
    <hr class="my-4">
    <form action="{{ url_for('main.contact') }}" method="post">
        {{ form.hidden_tag() }}
        {{ form.text(
            class_='form-control',
            rows=5,
            placeholder="Please leave your feedback here...") }}
        <div class="form-floating my-3">
            {{ form.email(class_='form-control') }}
            {{ form.email.label() }}
        </div>
        {{ form.submit(class_='btn btn-success w-100 mb-3') }}
    </form>
{% endmacro %}


{% macro render_rating_form(form, action_url, success, tipping=False, tipping_cap=0, answerer_reward_cent=0) %}
    {% set id_suffix = 'Plus' if success else 'Minus' %}
    <div class="mb-4">
        {% if success %}
            <p>The reward will be distributed if both users rate the engagement as successful.</p>
        {% else %}
            <p>No reward will be distributed if either user rates the engagement as unsuccessful.</p>
        {% endif %}
        {% if tipping %}
            <p>If you would like to tip the answerer, please choose one of the options below now.</p>
            <p>I would like to tip
                $<span id="valueBox{{- id_suffix -}}">0</span> (<span id="percentBox{{- id_suffix -}}">0</span>%
                of the answerer's reward).
            </p>
        {% endif %}
    </div>
    <form id="form{{- id_suffix -}}" action="{{ action_url }}" method="post">
        {{ form.hidden_tag() }}
        {% if tipping %}
            {{ form.tip_cent(
                    class_="form-range slider",
                    min=0,
                    max=tipping_cap,
                    value=0,
                    step=10 if tipping_cap % 10 == 0 else (5 if tipping_cap % 5 == 0 else (2 if tipping_cap % 2 == 0 else 1)),
                    oninput="showValue" + id_suffix + "(this.value)") }}
        {% endif %}
        <hr>
        <div class="d-flex mt-3">
            {{ form.submit(class_='btn btn-success me-auto', id='btnConfirm' + id_suffix) }}
            <button type="button" class="btn btn-secondary ms-auto" data-bs-dismiss="modal">
                Cancel
            </button>
        </div>
    </form>
    {% if tipping %}
        <script>
            function showValue{{- id_suffix -}}(newValue) {
                document.getElementById("valueBox{{- id_suffix -}}").innerHTML = (0.01 * newValue).toFixed(2);
                document.getElementById("percentBox{{- id_suffix -}}").innerHTML = (100 * newValue / {{ answerer_reward_cent }}).toFixed();
            }
        </script>
    {% endif %}
{% endmacro %}


{% macro render_confirm_form(form, action_url, button_class, button_id) %}
    <form action="{{ action_url }}" method="post">
        {{ form.hidden_tag() }}
        {{ form.submit(class_=button_class, id=button_id) }}
    </form>
{% endmacro %}


{% macro render_confirm_form_modal(modal_id, modal_title, modal_body, form, action_url) %}
    <div class="modal fade" tabindex="-1" role="dialog" id="{{ modal_id }}">
        <div class="modal-dialog modal-dialog-centered {% if request.MOBILE %}mx-5{% else %}modal-sm{% endif %}"
             role="document">
            <div class="modal-content rounded-4 shadow">
                <div class="modal-body p-4 text-center">
                    <h5>{{ modal_title|safe }}</h5>
                    <p class="mb-0">{{ modal_body|safe }}</p>
                </div>
                <form action="{{ action_url }}" method="post">
                    <div class="modal-footer flex-nowrap p-0">
                        {{ form.hidden_tag() }}
                        {{ form.submit(
                            class_='btn btn-lg btn-link fs-6 text-decoration-none col-6 m-0 rounded-0 border-end',
                            style='font-weight:bold',
                            id='btnConfirm_' + modal_id) }}
                        <button type="button" class="btn btn-lg btn-link fs-6 text-decoration-none col-6 m-0 rounded-0"
                                data-bs-dismiss="modal">Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endmacro %}
