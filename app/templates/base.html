{% import "macros_conf.html" as conf %}
{% import "macros_flash.html" as flash %}
{% import "macros_navbar.html" as navbar %}

<!doctype html>
<html lang="en">
<head>
    {% block head %}
        {% block meta %}
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            {{ conf.ios_meta(app_title=config["APP_NAME"]) }}
        {% endblock %}
        {% block link %}
            {{ conf.favicon_meta() }}
            {{ conf.bootstrap_css() }}
            {{ conf.site_css() }}
        {% endblock %}
        {% block scripts %}
            {{ conf.bootstrap_js() }}
            {{ conf.socketio_js() }}
            {{ flash.flash_toast_js() }}
            {{ moment.include_moment() }}
            {% if session.get('allow_cookie') %}
                {{ conf.google_analytics_js() }}
                {{ conf.hotjar_js() }}
            {% endif %}
        {% endblock %}
        <style>
            {% block style %}
            {% endblock %}
        </style>
        <title>
            {% block title %}
                {{ config["APP_NAME"] }} - {% if title %}{{ title }}{% else %}Boosted Q&A{% endif %}
            {% endblock %}
        </title>

        {% block head_appended %}
        {% endblock %}
    {% endblock %}
</head>
<body>
{% block body %}
    {{ navbar.render_navbar(current_user) }}
    <div class="container-fluid">
        {{ flash.render_flash(dismissible=True, dismiss_animate=True) }}
    </div>
    <main>
        {% block main %}
            <div class="container my-3 pb-5">
                {% block main_container %}
                {% endblock %}
            </div>
        {% endblock %}
    </main>
    {% if session.get('allow_cookie') is none %}
        <div class="toast-container fixed-bottom ms-auto" style="bottom:60px;right:10px">
            <div class="toast" role="alert" data-bs-delay="10000"
                 data-bs-autohide="false"
                 style="background-color: #ffffff">

                <div class="toast-header bg-light"><strong class="me-auto">Cookie Notice</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body pt-2"><p class="mb-1">This site only uses essential cookies by default. Weâ€™d also
                    like to use analytics cookies so we can measure and improve the performance of our site. Do you want
                    to allow analytics cookies?</p>
                    <div style="font-size:1.1rem">
                        <a class="badge btn-primary text-decoration-none" href=/allow_cookie/1>Accept</a>
                        <a class="badge btn-primary text-decoration-none" href=/allow_cookie/0>Reject</a>
                        <a class="badge btn-primary text-decoration-none" href=/cookie>Learn More</a>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
    <footer>
        {% block footer %}
            {{ navbar.render_navbar_bottom(current_user) }}
        {% endblock %}
    </footer>
{% endblock %}
</body>
</html>
<!-- {{ config["APP_VER"] }} -->
